@startuml use_case_integrations_settings
!theme plain
left to right direction

actor "Platform Admin" as Admin
actor "DevOps Engineer /\nAnalyst" as User
actor "GitHub" as GH
actor "CI Services\n(CircleCI, Travis)" as CI
actor "SonarQube" as Sonar
actor "Trivy" as Trivy
actor "Slack / Email" as Notify

rectangle "Integration & Access Control" {
  usecase "Sign in with\nGitHub OAuth" as UC_Login
  usecase "Sync GitHub App\ninstallations" as UC_SyncInstalls
  usecase "Manage GitHub\ntoken pool" as UC_Tokens
  usecase "Configure integration endpoints\n(SonarQube, CircleCI, Travis, Trivy)" as UC_ConfigIntegrations
  usecase "Configure notifications\n(Slack webhook, email recipients)" as UC_Notifications
  usecase "Check system health /\nmonitoring endpoints" as UC_Health
}

User --> UC_Login
Admin --> UC_Login
Admin --> UC_SyncInstalls
Admin --> UC_Tokens
Admin --> UC_ConfigIntegrations
Admin --> UC_Notifications
Admin --> UC_Health

GH --> UC_Login : OAuth redirect
GH --> UC_SyncInstalls : Installation list
CI --> UC_ConfigIntegrations : Enable/disable providers
Sonar --> UC_ConfigIntegrations
Trivy --> UC_ConfigIntegrations
Notify --> UC_Notifications : Deliver alerts

note bottom of UC_Tokens
  CRUD tokens, refresh rate limits,
  verify and disable tokens
end note

note bottom of UC_Health
  Health pings for backend, Celery,
  message broker and database
end note
@enduml
