@startuml
'===============================================================
' ACTIVITY (SWIMLANE): DATASET IMPORT, VALIDATION, ENRICHMENT
'===============================================================
|Admin|
start
:Upload dataset (CSV);
:Map required fields (build_id, repo_name);
|System|
:Validate repositories/builds;
|GitHub|
:Check repositories;
|CI Provider|
:Check builds;
|System|
if (Validation passes?) then (yes)
  :Select features / version config;
  :Enqueue enrichment job;
  repeat
    :Fetch sources for row;
    |System|
    :Pull repo metadata (GitHub) and commit diff/history (git);
    |Integration Tools (SonarQube/Trivy)|
    :Pull code quality and scan metrics;
    |System|
    :Extract selected features;
    :Append to dataset version;
  repeat while (rows remaining?)
  :Store version output;
  :Notify availability for download;
else (no)
  :Return validation errors;
endif
stop
@enduml
