@startuml use_case_repositories_builds
!theme plain
left to right direction

actor "DevOps Engineer /\nAnalyst" as User
actor "Platform Admin" as Admin
actor "GitHub" as GH
actor "SonarQube" as Sonar

rectangle "Repository & Build Management" {
  usecase "Discover / search repositories\n(via GitHub App)" as UC_Discover
  usecase "Select repositories &\nconfigure settings" as UC_Select
  usecase "Trigger import / resync builds" as UC_Import
  usecase "Reprocess features for builds" as UC_Reprocess
  usecase "Browse & search builds" as UC_Browse
  usecase "View build details & logs" as UC_Detail
  usecase "Export build data\n(CSV/JSON streaming or async)" as UC_Export
  usecase "Configure repo SonarQube scans" as UC_SonarConfig
  usecase "Retry failed scans & review metrics" as UC_SonarMetrics
}

User --> UC_Discover
User --> UC_Select
User --> UC_Import
User --> UC_Reprocess
User --> UC_Browse
User --> UC_Detail
User --> UC_Export
User --> UC_SonarConfig
User --> UC_SonarMetrics

Admin --> UC_Discover
Admin --> UC_Select
Admin --> UC_Import
Admin --> UC_Reprocess

UC_Discover --> UC_Select
UC_Select --> UC_Import
UC_Import --> UC_Browse : <<include>>
UC_Browse --> UC_Detail : <<include>>
UC_Import --> UC_Reprocess : <<include>>
UC_SonarConfig --> UC_SonarMetrics : <<include>>

GH --> UC_Discover : List installations
GH --> UC_Import : Webhooks & API\n(workflow runs, logs)
Sonar --> UC_SonarConfig : Scan jobs
Sonar --> UC_SonarMetrics : Scan results

note right of UC_Select
  Configure languages, test frameworks,
  build limits, repo-level settings
end note

note bottom of UC_Export
  Supports filters, async jobs,
  download when completed
end note
@enduml
